<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2847px" preserveAspectRatio="none" style="width:949px;height:2847px;background:#FFFFFF;" version="1.1" viewBox="0 0 949 2847" width="949px" zoomAndPan="magnify"><title>Dezi login and user identity in data exchanges</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="367.541" x="286.8184" y="27.9951">Dezi login and user identity in data exchanges</text><rect fill="#DDDDDD" height="2798.4766" style="stroke:#181818;stroke-width:0.5;" width="764.8428" x="16" y="43.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66.8979" x="364.9724" y="55.3638">Local XIS</text><g><title>EHR</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="258.3945" y="228.125"/></g><g><title>EHR</title><rect fill="#FFFFFF" height="481.9922" style="stroke:#181818;stroke-width:1;" width="10" x="258.3945" y="516.7188"/></g><g><title>EHR</title><rect fill="#FFFFFF" height="224.7969" style="stroke:#181818;stroke-width:1;" width="10" x="263.3945" y="666.5156"/></g><g><title>EHR</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="258.3945" y="1101.2422"/></g><g><title>EHR</title><rect fill="#FFFFFF" height="262.4609" style="stroke:#181818;stroke-width:1;" width="10" x="258.3945" y="2046.7578"/></g><g><title>EHR</title><rect fill="#FFFFFF" height="347.8594" style="stroke:#181818;stroke-width:1;" width="10" x="258.3945" y="2396.6172"/></g><g><title>Knooppunt</title><rect fill="#FFFFFF" height="86.3984" style="stroke:#181818;stroke-width:1;" width="10" x="489.4155" y="1189.7734"/></g><g><title>Knooppunt</title><rect fill="#FFFFFF" height="481.9922" style="stroke:#181818;stroke-width:1;" width="10" x="489.4155" y="1520.5"/></g><g><title>Knooppunt</title><rect fill="#FFFFFF" height="224.7969" style="stroke:#181818;stroke-width:1;" width="10" x="494.4155" y="1670.2969"/></g><g><title>Knooppunt</title><rect fill="#FFFFFF" height="116.6641" style="stroke:#181818;stroke-width:1;" width="10" x="489.4155" y="2091.0234"/></g><g><title>Knooppunt</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="489.4155" y="2489.1484"/></g><g><title>OAuth Client</title><rect fill="#FFFFFF" height="47.2656" style="stroke:#181818;stroke-width:1;" width="10" x="720.4365" y="2569.5469"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="340.7891"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="428.1875"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="560.9844"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="784.9141"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="1344.5703"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="1431.9688"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="1564.7656"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="1788.6953"/></g><g><title>Remote XIS</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="884.3262" y="2671.0781"/></g><rect fill="none" height="625.9219" style="stroke:#000000;stroke-width:1.5;" width="841.4746" x="10" y="287.3906"/><rect fill="none" height="286.0625" style="stroke:#000000;stroke-width:1.5;" width="609.6304" x="231.8442" y="620.25"/><rect fill="none" height="625.9219" style="stroke:#000000;stroke-width:1.5;" width="841.4746" x="10" y="1291.1719"/><rect fill="none" height="286.0625" style="stroke:#000000;stroke-width:1.5;" width="402.1558" x="439.3188" y="1624.0313"/><rect fill="none" height="216.1953" style="stroke:#000000;stroke-width:1.5;" width="691.0498" x="221.8442" y="2411.6172"/><rect fill="none" height="90.5313" style="stroke:#000000;stroke-width:1.5;" width="318.29" x="231.8442" y="2435.75"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="2623.75" width="8" x="34.9551" y="138.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="38" x2="38" y1="138.7266" y2="2762.4766"/></g><g><title>Browser</title><rect fill="#000000" fill-opacity="0.00000" height="2623.75" width="8" x="99.4297" y="138.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="102.9102" x2="102.9102" y1="138.7266" y2="2762.4766"/></g><g><title>EHR</title><rect fill="#000000" fill-opacity="0.00000" height="2623.75" width="8" x="259.3945" y="138.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="262.8442" x2="262.8442" y1="138.7266" y2="2762.4766"/></g><g><title>Knooppunt</title><rect fill="#000000" fill-opacity="0.00000" height="2623.75" width="8" x="490.4155" y="138.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="494.3188" x2="494.3188" y1="138.7266" y2="2762.4766"/></g><g><title>OAuth Client</title><rect fill="#000000" fill-opacity="0.00000" height="2623.75" width="8" x="721.4365" y="138.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="725.0303" x2="725.0303" y1="138.7266" y2="2762.4766"/></g><g><title>Dezi</title><rect fill="#000000" fill-opacity="0.00000" height="2623.75" width="8" x="805.1587" y="138.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="808.8428" x2="808.8428" y1="138.7266" y2="2762.4766"/></g><g><title>Remote XIS</title><rect fill="#000000" fill-opacity="0.00000" height="2623.75" width="8" x="885.3262" y="138.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="888.4746" x2="888.4746" y1="138.7266" y2="2762.4766"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="20" y="135.4248">User</text><ellipse cx="38.9551" cy="70.9297" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.9551,78.9297 L38.9551,105.9297 M25.9551,86.9297 L51.9551,86.9297 M38.9551,105.9297 L25.9551,120.9297 M38.9551,105.9297 L51.9551,120.9297" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="20" y="2774.4717">User</text><ellipse cx="38.9551" cy="2786.2734" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M38.9551,2794.2734 L38.9551,2821.2734 M25.9551,2802.2734 L51.9551,2802.2734 M38.9551,2821.2734 L25.9551,2836.2734 M38.9551,2821.2734 L51.9551,2836.2734" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Browser"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.0391" x="67.9102" y="107.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0391" x="74.9102" y="127.4248">Browser</text></g><g class="participant participant-tail" data-participant="Browser"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.0391" x="67.9102" y="2761.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0391" x="74.9102" y="2781.4717">Browser</text></g><g class="participant participant-head" data-participant="EHR"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43.1006" x="241.8442" y="107.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.1006" x="248.8442" y="127.4248">EHR</text></g><g class="participant participant-tail" data-participant="EHR"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43.1006" x="241.8442" y="2761.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.1006" x="248.8442" y="2781.4717">EHR</text></g><g class="participant participant-head" data-participant="Knooppunt"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90.1934" x="449.3188" y="107.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.1934" x="456.3188" y="127.4248">Knooppunt</text></g><g class="participant participant-tail" data-participant="Knooppunt"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90.1934" x="449.3188" y="2761.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.1934" x="456.3188" y="2781.4717">Knooppunt</text></g><g class="participant participant-head" data-participant="AuthClient"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.8125" x="674.0303" y="91.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.8125" x="681.0303" y="111.1279">OAuth Client</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.041" x="683.416" y="127.4248">(Nuts Node)</text></g><g class="participant participant-tail" data-participant="AuthClient"><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102.8125" x="674.0303" y="2761.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88.8125" x="681.0303" y="2781.4717">OAuth Client</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84.041" x="683.416" y="2797.7686">(Nuts Node)</text></g><g class="participant participant-head" data-participant="Dezi"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44.6318" x="786.8428" y="107.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.6318" x="793.8428" y="127.4248">Dezi</text></g><g class="participant participant-tail" data-participant="Dezi"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="44.6318" x="786.8428" y="2761.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.6318" x="793.8428" y="2781.4717">Dezi</text></g><g class="participant participant-head" data-participant="RemoteXIS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.7031" x="841.4746" y="107.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="848.4746" y="127.4248">Remote XIS</text></g><g class="participant participant-tail" data-participant="RemoteXIS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.7031" x="841.4746" y="2761.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="848.4746" y="2781.4717">Remote XIS</text></g><g><title>EHR</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="258.3945" y="228.125"/></g><g><title>EHR</title><rect fill="#FFFFFF" height="481.9922" style="stroke:#181818;stroke-width:1;" width="10" x="258.3945" y="516.7188"/></g><g><title>EHR</title><rect fill="#FFFFFF" height="224.7969" style="stroke:#181818;stroke-width:1;" width="10" x="263.3945" y="666.5156"/></g><g><title>EHR</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="258.3945" y="1101.2422"/></g><g><title>EHR</title><rect fill="#FFFFFF" height="262.4609" style="stroke:#181818;stroke-width:1;" width="10" x="258.3945" y="2046.7578"/></g><g><title>EHR</title><rect fill="#FFFFFF" height="347.8594" style="stroke:#181818;stroke-width:1;" width="10" x="258.3945" y="2396.6172"/></g><g><title>Knooppunt</title><rect fill="#FFFFFF" height="86.3984" style="stroke:#181818;stroke-width:1;" width="10" x="489.4155" y="1189.7734"/></g><g><title>Knooppunt</title><rect fill="#FFFFFF" height="481.9922" style="stroke:#181818;stroke-width:1;" width="10" x="489.4155" y="1520.5"/></g><g><title>Knooppunt</title><rect fill="#FFFFFF" height="224.7969" style="stroke:#181818;stroke-width:1;" width="10" x="494.4155" y="1670.2969"/></g><g><title>Knooppunt</title><rect fill="#FFFFFF" height="116.6641" style="stroke:#181818;stroke-width:1;" width="10" x="489.4155" y="2091.0234"/></g><g><title>Knooppunt</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="489.4155" y="2489.1484"/></g><g><title>OAuth Client</title><rect fill="#FFFFFF" height="47.2656" style="stroke:#181818;stroke-width:1;" width="10" x="720.4365" y="2569.5469"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="340.7891"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="428.1875"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="560.9844"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="784.9141"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="1344.5703"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="1431.9688"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="1564.7656"/></g><g><title>Dezi</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="804.1587" y="1788.6953"/></g><g><title>Remote XIS</title><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1;" width="10" x="884.3262" y="2671.0781"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="942.1777" x="0" y="176.8594"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="942.1777" y1="176.8594" y2="176.8594"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="942.1777" y1="179.8594" y2="179.8594"/><rect fill="#EEEEEE" height="38.2656" style="stroke:#000000;stroke-width:2;" width="264.1929" x="338.9924" y="158.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72.5601" x="344.9924" y="174.7935">Dezi login</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="236.6152" x="354.0442" y="189.9263">opt. A: EHR integrates with Dezi</text><g class="message" data-participant-1="User" data-participant-2="EHR"><polygon fill="#181818" points="246.3945,224.125,256.3945,228.125,246.3945,232.125,250.3945,228.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.9551" x2="252.3945" y1="228.125" y2="228.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.4033" x="45.9551" y="223.0591">Login/Interact</text></g><g class="message" data-participant-1="EHR" data-participant-2="Browser"><polygon fill="#181818" points="114.4297,268.3906,104.4297,272.3906,114.4297,276.3906,110.4297,272.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.4297" x2="262.3945" y1="272.3906" y2="272.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.9648" x="120.4297" y="252.1919">Make Auth Request,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.7939" x="120.4297" y="267.3247">redirect</text></g><path d="M10,287.3906 L292.0977,287.3906 L292.0977,294.5234 L282.0977,304.5234 L10,304.5234 L10,287.3906" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="625.9219" style="stroke:#000000;stroke-width:1.5;" width="841.4746" x="10" y="287.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="237.0977" x="25" y="300.4575">Dezi OIDC Authorized Code Flow</text><g class="message" data-participant-1="Browser" data-participant-2="Dezi"><polygon fill="#181818" points="792.1587,336.7891,802.1587,340.7891,792.1587,344.7891,796.1587,340.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="103.4297" x2="798.1587" y1="340.7891" y2="340.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.8794" x="110.4297" y="320.5903">OIDC Authorization Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.9478" x="110.4297" y="335.7231">(scope=openid profile)</text></g><g class="message" data-participant-1="Dezi" data-participant-2="Browser"><polygon fill="#181818" points="114.4297,365.9219,104.4297,369.9219,114.4297,373.9219,110.4297,369.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="108.4297" x2="808.1587" y1="369.9219" y2="369.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.0264" x="120.4297" y="364.856">Request authentication</text></g><g class="message" data-participant-1="User" data-participant-2="Browser"><polygon fill="#181818" points="91.4297,395.0547,101.4297,399.0547,91.4297,403.0547,95.4297,399.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.9551" x2="97.4297" y1="399.0547" y2="399.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35.2993" x="45.9551" y="393.9888">Login</text></g><g class="message" data-participant-1="Browser" data-participant-2="Dezi"><polygon fill="#181818" points="792.1587,424.1875,802.1587,428.1875,792.1587,432.1875,796.1587,428.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="103.4297" x2="798.1587" y1="428.1875" y2="428.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.7241" x="110.4297" y="423.1216">User auth (e.g. DigiD)</text></g><g class="message" data-participant-1="Dezi" data-participant-2="Browser"><polygon fill="#181818" points="114.4297,468.4531,104.4297,472.4531,114.4297,476.4531,110.4297,472.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="108.4297" x2="808.1587" y1="472.4531" y2="472.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.9067" x="120.4297" y="452.2544">OIDC Auth Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1689" x="120.4297" y="467.3872">(auth code)</text></g><g class="message" data-participant-1="Browser" data-participant-2="EHR"><polygon fill="#181818" points="246.3945,512.7188,256.3945,516.7188,246.3945,520.7188,250.3945,516.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="103.4297" x2="252.3945" y1="516.7188" y2="516.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.4819" x="110.4297" y="496.52">Redirect</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1689" x="110.4297" y="511.6528">(auth code)</text></g><g class="message" data-participant-1="EHR" data-participant-2="Dezi"><polygon fill="#181818" points="792.1587,556.9844,802.1587,560.9844,792.1587,564.9844,796.1587,560.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="268.3945" x2="798.1587" y1="560.9844" y2="560.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.4688" x="275.3945" y="540.7856">OIDC Token Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1689" x="275.3945" y="555.9185">(auth code)</text></g><g class="message" data-participant-1="Dezi" data-participant-2="EHR"><polygon fill="#181818" points="279.3945,601.25,269.3945,605.25,279.3945,609.25,275.3945,605.25" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="273.3945" x2="808.1587" y1="605.25" y2="605.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.0981" x="285.3945" y="585.0513">OIDC Token Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.4893" x="285.3945" y="600.1841">(id_token(encrypted))</text></g><path d="M231.8442,620.25 L418.5049,620.25 L418.5049,627.3828 L408.5049,637.3828 L231.8442,637.3828 L231.8442,620.25" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="286.0625" style="stroke:#000000;stroke-width:1.5;" width="609.6304" x="231.8442" y="620.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141.6606" x="246.8442" y="633.3169">Dezi business rules</text><g class="message" data-participant-1="EHR" data-participant-2="EHR"><line style="stroke:#181818;stroke-width:1;" x1="268.3945" x2="315.3945" y1="653.5156" y2="653.5156"/><line style="stroke:#181818;stroke-width:1;" x1="315.3945" x2="315.3945" y1="653.5156" y2="666.5156"/><line style="stroke:#181818;stroke-width:1;" x1="274.3945" x2="315.3945" y1="666.5156" y2="666.5156"/><polygon fill="#181818" points="284.3945,662.5156,274.3945,666.5156,284.3945,670.5156,280.3945,666.5156" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.3071" x="280.3945" y="648.4497">Process id_token(encrypted)</text></g><g class="message" data-participant-1="EHR" data-participant-2="EHR"><line style="stroke:#181818;stroke-width:1;" x1="273.3945" x2="315.3945" y1="700.6484" y2="700.6484"/><line style="stroke:#181818;stroke-width:1;" x1="315.3945" x2="315.3945" y1="700.6484" y2="713.6484"/><line style="stroke:#181818;stroke-width:1;" x1="274.3945" x2="315.3945" y1="713.6484" y2="713.6484"/><polygon fill="#181818" points="284.3945,709.6484,274.3945,713.6484,284.3945,717.6484,280.3945,713.6484" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.021" x="280.3945" y="695.5825">Decrypt id_token(encrypted)</text></g><g class="message" data-participant-1="EHR" data-participant-2="EHR"><line style="stroke:#181818;stroke-width:1;" x1="273.3945" x2="315.3945" y1="742.7813" y2="742.7813"/><line style="stroke:#181818;stroke-width:1;" x1="315.3945" x2="315.3945" y1="742.7813" y2="755.7813"/><line style="stroke:#181818;stroke-width:1;" x1="274.3945" x2="315.3945" y1="755.7813" y2="755.7813"/><polygon fill="#181818" points="284.3945,751.7813,274.3945,755.7813,284.3945,759.7813,280.3945,755.7813" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.6152" x="280.3945" y="737.7153">Validate id_token claims</text></g><g class="message" data-participant-1="EHR" data-participant-2="Dezi"><polygon fill="#181818" points="792.1587,780.9141,802.1587,784.9141,792.1587,788.9141,796.1587,784.9141" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="273.3945" x2="798.1587" y1="784.9141" y2="784.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.3848" x="280.3945" y="779.8481">Get revocation status</text></g><g class="message" data-participant-1="Dezi" data-participant-2="EHR"><polygon fill="#181818" points="284.3945,810.0469,274.3945,814.0469,284.3945,818.0469,280.3945,814.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="278.3945" x2="808.1587" y1="814.0469" y2="814.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.7715" x="290.3945" y="808.981">Revocation status</text></g><g class="message" data-participant-1="EHR" data-participant-2="EHR"><line style="stroke:#181818;stroke-width:1;" x1="273.3945" x2="315.3945" y1="843.1797" y2="843.1797"/><line style="stroke:#181818;stroke-width:1;" x1="315.3945" x2="315.3945" y1="843.1797" y2="856.1797"/><line style="stroke:#181818;stroke-width:1;" x1="274.3945" x2="315.3945" y1="856.1797" y2="856.1797"/><polygon fill="#181818" points="284.3945,852.1797,274.3945,856.1797,284.3945,860.1797,280.3945,856.1797" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.2061" x="280.3945" y="838.1138">Check revocation status</text></g><g class="message" data-participant-1="EHR" data-participant-2="EHR"><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="273.3945" x2="315.3945" y1="890.3125" y2="890.3125"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="315.3945" x2="315.3945" y1="890.3125" y2="903.3125"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="268.3945" x2="315.3945" y1="903.3125" y2="903.3125"/><polygon fill="#181818" points="278.3945,899.3125,268.3945,903.3125,278.3945,907.3125,274.3945,903.3125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51.6191" x="280.3945" y="885.2466">OK/NOK</text></g><g class="message" data-participant-1="EHR" data-participant-2="EHR"><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="268.3945" x2="310.3945" y1="956.5781" y2="956.5781"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="310.3945" x2="310.3945" y1="956.5781" y2="969.5781"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="269.3945" x2="310.3945" y1="969.5781" y2="969.5781"/><polygon fill="#181818" points="279.3945,965.5781,269.3945,969.5781,279.3945,973.5781,275.3945,969.5781" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.521" x="275.3945" y="936.3794">Store id_token or,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.293" x="275.3945" y="951.5122">create user session</text></g><g class="message" data-participant-1="EHR" data-participant-2="Browser"><polygon fill="#181818" points="114.4297,994.7109,104.4297,998.7109,114.4297,1002.7109,110.4297,998.7109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="108.4297" x2="262.3945" y1="998.7109" y2="998.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.0659" x="120.4297" y="993.645">User logged in</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="942.1777" x="0" y="1042.4102"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="942.1777" y1="1042.4102" y2="1042.4102"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="942.1777" y1="1045.4102" y2="1045.4102"/><rect fill="#EEEEEE" height="53.3984" style="stroke:#000000;stroke-width:2;" width="261.2476" x="340.4651" y="1016.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72.5601" x="346.4651" y="1032.7778">Dezi login</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="189.7314" x="355.5168" y="1047.9106">opt. B: Knooppunt as IDP,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="233.6699" x="355.5168" y="1063.0435">Knooppunt integrates with Dezi</text><g class="message" data-participant-1="User" data-participant-2="EHR"><polygon fill="#181818" points="246.3945,1097.2422,256.3945,1101.2422,246.3945,1105.2422,250.3945,1101.2422" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.9551" x2="252.3945" y1="1101.2422" y2="1101.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.4033" x="45.9551" y="1096.1763">Login/Interact</text></g><g class="message" data-participant-1="EHR" data-participant-2="Browser"><polygon fill="#181818" points="114.4297,1141.5078,104.4297,1145.5078,114.4297,1149.5078,110.4297,1145.5078" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="108.4297" x2="262.3945" y1="1145.5078" y2="1145.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.9648" x="120.4297" y="1125.3091">Make Auth Request,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50.7939" x="120.4297" y="1140.4419">redirect</text></g><g class="message" data-participant-1="Browser" data-participant-2="Knooppunt"><polygon fill="#181818" points="477.4155,1185.7734,487.4155,1189.7734,477.4155,1193.7734,481.4155,1189.7734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="103.4297" x2="483.4155" y1="1189.7734" y2="1189.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.8794" x="110.4297" y="1169.5747">OIDC Authorization Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.9478" x="110.4297" y="1184.7075">(scope=openid profile)</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Knooppunt"><line style="stroke:#181818;stroke-width:1;" x1="499.4155" x2="541.4155" y1="1234.0391" y2="1234.0391"/><line style="stroke:#181818;stroke-width:1;" x1="541.4155" x2="541.4155" y1="1234.0391" y2="1247.0391"/><line style="stroke:#181818;stroke-width:1;" x1="500.4155" x2="541.4155" y1="1247.0391" y2="1247.0391"/><polygon fill="#181818" points="510.4155,1243.0391,500.4155,1247.0391,510.4155,1251.0391,506.4155,1247.0391" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.5581" x="506.4155" y="1213.8403">Make redirect URL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.1255" x="506.4155" y="1228.9731">for Dezi auth</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Browser"><polygon fill="#181818" points="114.4297,1272.1719,104.4297,1276.1719,114.4297,1280.1719,110.4297,1276.1719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="108.4297" x2="493.4155" y1="1276.1719" y2="1276.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.7168" x="120.4297" y="1271.106">redirect URL</text></g><path d="M10,1291.1719 L292.0977,1291.1719 L292.0977,1298.3047 L282.0977,1308.3047 L10,1308.3047 L10,1291.1719" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="625.9219" style="stroke:#000000;stroke-width:1.5;" width="841.4746" x="10" y="1291.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="237.0977" x="25" y="1304.2388">Dezi OIDC Authorized Code Flow</text><g class="message" data-participant-1="Browser" data-participant-2="Dezi"><polygon fill="#181818" points="792.1587,1340.5703,802.1587,1344.5703,792.1587,1348.5703,796.1587,1344.5703" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="103.4297" x2="798.1587" y1="1344.5703" y2="1344.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.8794" x="110.4297" y="1324.3716">OIDC Authorization Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.9478" x="110.4297" y="1339.5044">(scope=openid profile)</text></g><g class="message" data-participant-1="Dezi" data-participant-2="Browser"><polygon fill="#181818" points="114.4297,1369.7031,104.4297,1373.7031,114.4297,1377.7031,110.4297,1373.7031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="108.4297" x2="808.1587" y1="1373.7031" y2="1373.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.0264" x="120.4297" y="1368.6372">Request authentication</text></g><g class="message" data-participant-1="User" data-participant-2="Browser"><polygon fill="#181818" points="91.4297,1398.8359,101.4297,1402.8359,91.4297,1406.8359,95.4297,1402.8359" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.9551" x2="97.4297" y1="1402.8359" y2="1402.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35.2993" x="45.9551" y="1397.77">Login</text></g><g class="message" data-participant-1="Browser" data-participant-2="Dezi"><polygon fill="#181818" points="792.1587,1427.9688,802.1587,1431.9688,792.1587,1435.9688,796.1587,1431.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="103.4297" x2="798.1587" y1="1431.9688" y2="1431.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.7241" x="110.4297" y="1426.9028">User auth (e.g. DigiD)</text></g><g class="message" data-participant-1="Dezi" data-participant-2="Browser"><polygon fill="#181818" points="114.4297,1472.2344,104.4297,1476.2344,114.4297,1480.2344,110.4297,1476.2344" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="108.4297" x2="808.1587" y1="1476.2344" y2="1476.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.9067" x="120.4297" y="1456.0356">OIDC Auth Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1689" x="120.4297" y="1471.1685">(auth code)</text></g><g class="message" data-participant-1="Browser" data-participant-2="Knooppunt"><polygon fill="#181818" points="477.4155,1516.5,487.4155,1520.5,477.4155,1524.5,481.4155,1520.5" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="103.4297" x2="483.4155" y1="1520.5" y2="1520.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.4819" x="110.4297" y="1500.3013">Redirect</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1689" x="110.4297" y="1515.4341">(auth code)</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Dezi"><polygon fill="#181818" points="792.1587,1560.7656,802.1587,1564.7656,792.1587,1568.7656,796.1587,1564.7656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="499.4155" x2="798.1587" y1="1564.7656" y2="1564.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.4688" x="506.4155" y="1544.5669">OIDC Token Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1689" x="506.4155" y="1559.6997">(auth code)</text></g><g class="message" data-participant-1="Dezi" data-participant-2="Knooppunt"><polygon fill="#181818" points="510.4155,1605.0313,500.4155,1609.0313,510.4155,1613.0313,506.4155,1609.0313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="504.4155" x2="808.1587" y1="1609.0313" y2="1609.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.0981" x="516.4155" y="1588.8325">OIDC Token Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.4893" x="516.4155" y="1603.9653">(id_token(encrypted))</text></g><path d="M439.3188,1624.0313 L625.9795,1624.0313 L625.9795,1631.1641 L615.9795,1641.1641 L439.3188,1641.1641 L439.3188,1624.0313" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="286.0625" style="stroke:#000000;stroke-width:1.5;" width="402.1558" x="439.3188" y="1624.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141.6606" x="454.3188" y="1637.0981">Dezi business rules</text><g class="message" data-participant-1="Knooppunt" data-participant-2="Knooppunt"><line style="stroke:#181818;stroke-width:1;" x1="499.4155" x2="546.4155" y1="1657.2969" y2="1657.2969"/><line style="stroke:#181818;stroke-width:1;" x1="546.4155" x2="546.4155" y1="1657.2969" y2="1670.2969"/><line style="stroke:#181818;stroke-width:1;" x1="505.4155" x2="546.4155" y1="1670.2969" y2="1670.2969"/><polygon fill="#181818" points="515.4155,1666.2969,505.4155,1670.2969,515.4155,1674.2969,511.4155,1670.2969" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.3071" x="511.4155" y="1652.231">Process id_token(encrypted)</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Knooppunt"><line style="stroke:#181818;stroke-width:1;" x1="504.4155" x2="546.4155" y1="1704.4297" y2="1704.4297"/><line style="stroke:#181818;stroke-width:1;" x1="546.4155" x2="546.4155" y1="1704.4297" y2="1717.4297"/><line style="stroke:#181818;stroke-width:1;" x1="505.4155" x2="546.4155" y1="1717.4297" y2="1717.4297"/><polygon fill="#181818" points="515.4155,1713.4297,505.4155,1717.4297,515.4155,1721.4297,511.4155,1717.4297" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.021" x="511.4155" y="1699.3638">Decrypt id_token(encrypted)</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Knooppunt"><line style="stroke:#181818;stroke-width:1;" x1="504.4155" x2="546.4155" y1="1746.5625" y2="1746.5625"/><line style="stroke:#181818;stroke-width:1;" x1="546.4155" x2="546.4155" y1="1746.5625" y2="1759.5625"/><line style="stroke:#181818;stroke-width:1;" x1="505.4155" x2="546.4155" y1="1759.5625" y2="1759.5625"/><polygon fill="#181818" points="515.4155,1755.5625,505.4155,1759.5625,515.4155,1763.5625,511.4155,1759.5625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.6152" x="511.4155" y="1741.4966">Validate id_token claims</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Dezi"><polygon fill="#181818" points="792.1587,1784.6953,802.1587,1788.6953,792.1587,1792.6953,796.1587,1788.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="504.4155" x2="798.1587" y1="1788.6953" y2="1788.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.3848" x="511.4155" y="1783.6294">Get revocation status</text></g><g class="message" data-participant-1="Dezi" data-participant-2="Knooppunt"><polygon fill="#181818" points="515.4155,1813.8281,505.4155,1817.8281,515.4155,1821.8281,511.4155,1817.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="509.4155" x2="808.1587" y1="1817.8281" y2="1817.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.7715" x="521.4155" y="1812.7622">Revocation status</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Knooppunt"><line style="stroke:#181818;stroke-width:1;" x1="504.4155" x2="546.4155" y1="1846.9609" y2="1846.9609"/><line style="stroke:#181818;stroke-width:1;" x1="546.4155" x2="546.4155" y1="1846.9609" y2="1859.9609"/><line style="stroke:#181818;stroke-width:1;" x1="505.4155" x2="546.4155" y1="1859.9609" y2="1859.9609"/><polygon fill="#181818" points="515.4155,1855.9609,505.4155,1859.9609,515.4155,1863.9609,511.4155,1859.9609" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.2061" x="511.4155" y="1841.895">Check revocation status</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Knooppunt"><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="504.4155" x2="546.4155" y1="1894.0938" y2="1894.0938"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="546.4155" x2="546.4155" y1="1894.0938" y2="1907.0938"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="499.4155" x2="546.4155" y1="1907.0938" y2="1907.0938"/><polygon fill="#181818" points="509.4155,1903.0938,499.4155,1907.0938,509.4155,1911.0938,505.4155,1907.0938" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51.6191" x="511.4155" y="1889.0278">OK/NOK</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Knooppunt"><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="499.4155" x2="541.4155" y1="1945.2266" y2="1945.2266"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="541.4155" x2="541.4155" y1="1945.2266" y2="1958.2266"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="500.4155" x2="541.4155" y1="1958.2266" y2="1958.2266"/><polygon fill="#181818" points="510.4155,1954.2266,500.4155,1958.2266,510.4155,1962.2266,506.4155,1958.2266" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.1953" x="506.4155" y="1940.1606">Store id_token in session</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Browser"><polygon fill="#181818" points="114.4297,1998.4922,104.4297,2002.4922,114.4297,2006.4922,110.4297,2002.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="108.4297" x2="493.4155" y1="2002.4922" y2="2002.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.9067" x="120.4297" y="1982.2935">OIDC Auth Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1689" x="120.4297" y="1997.4263">(auth code)</text></g><g class="message" data-participant-1="Browser" data-participant-2="EHR"><polygon fill="#181818" points="246.3945,2042.7578,256.3945,2046.7578,246.3945,2050.7578,250.3945,2046.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="103.4297" x2="252.3945" y1="2046.7578" y2="2046.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.4819" x="110.4297" y="2026.5591">Redirect</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1689" x="110.4297" y="2041.6919">(auth code)</text></g><g class="message" data-participant-1="EHR" data-participant-2="Knooppunt"><polygon fill="#181818" points="477.4155,2087.0234,487.4155,2091.0234,477.4155,2095.0234,481.4155,2091.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="268.3945" x2="483.4155" y1="2091.0234" y2="2091.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.4688" x="275.3945" y="2070.8247">OIDC Token Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75.1689" x="275.3945" y="2085.9575">(auth code)</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="Knooppunt"><line style="stroke:#181818;stroke-width:1;" x1="499.4155" x2="541.4155" y1="2135.2891" y2="2135.2891"/><line style="stroke:#181818;stroke-width:1;" x1="541.4155" x2="541.4155" y1="2135.2891" y2="2148.2891"/><line style="stroke:#181818;stroke-width:1;" x1="500.4155" x2="541.4155" y1="2148.2891" y2="2148.2891"/><polygon fill="#181818" points="510.4155,2144.2891,500.4155,2148.2891,510.4155,2152.2891,506.4155,2148.2891" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.7583" x="506.4155" y="2115.0903">Create DeziIDTokenCredential</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.3237" x="506.4155" y="2130.2231">(id_token)</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="EHR"><polygon fill="#181818" points="279.3945,2203.6875,269.3945,2207.6875,279.3945,2211.6875,275.3945,2207.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="273.3945" x2="493.4155" y1="2207.6875" y2="2207.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.0981" x="285.3945" y="2172.356">OIDC Token Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.3843" x="285.3945" y="2187.4888">(id_token,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.2163" x="285.3945" y="2202.6216">DeziIDTokenCredential)</text></g><path d="M504,2165.8555 L504,2205.8555 L731,2205.8555 L731,2175.8555 L721,2165.8555 L504,2165.8555" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M721,2165.8555 L721,2175.8555 L731,2175.8555 L721,2165.8555" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206.7622" x="510" y="2182.9224">Custom field in token response:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.1445" x="510" y="2198.0552">DeziIDTokenCredential</text><g class="message" data-participant-1="EHR" data-participant-2="EHR"><line style="stroke:#181818;stroke-width:1;" x1="268.3945" x2="310.3945" y1="2267.0859" y2="2267.0859"/><line style="stroke:#181818;stroke-width:1;" x1="310.3945" x2="310.3945" y1="2267.0859" y2="2280.0859"/><line style="stroke:#181818;stroke-width:1;" x1="269.3945" x2="310.3945" y1="2280.0859" y2="2280.0859"/><polygon fill="#181818" points="279.3945,2276.0859,269.3945,2280.0859,279.3945,2284.0859,275.3945,2280.0859" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.7534" x="275.3945" y="2231.7544">Update/create user session</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.3843" x="275.3945" y="2246.8872">(id_token,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.2163" x="275.3945" y="2262.02">DeziIDTokenCredential)</text></g><g class="message" data-participant-1="EHR" data-participant-2="Browser"><polygon fill="#181818" points="114.4297,2305.2188,104.4297,2309.2188,114.4297,2313.2188,110.4297,2309.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="108.4297" x2="262.3945" y1="2309.2188" y2="2309.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.0659" x="120.4297" y="2304.1528">User logged in</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="942.1777" x="0" y="2337.7852"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="942.1777" y1="2337.7852" y2="2337.7852"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="942.1777" y1="2340.7852" y2="2340.7852"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="254.9316" x="343.623" y="2327.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="236.4058" x="349.623" y="2343.2856">Fetching data with user identity</text><g class="message" data-participant-1="User" data-participant-2="EHR"><polygon fill="#181818" points="246.3945,2392.6172,256.3945,2396.6172,246.3945,2400.6172,250.3945,2396.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="38.9551" x2="252.3945" y1="2396.6172" y2="2396.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.8042" x="45.9551" y="2376.4185">Request data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.3145" x="45.9551" y="2391.5513">from remote source</text></g><path d="M221.8442,2411.6172 L391.9375,2411.6172 L391.9375,2418.75 L381.9375,2428.75 L221.8442,2428.75 L221.8442,2411.6172" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="216.1953" style="stroke:#000000;stroke-width:1.5;" width="691.0498" x="221.8442" y="2411.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="125.0933" x="236.8442" y="2424.6841">Get access token</text><path d="M231.8442,2435.75 L545.1343,2435.75 L545.1343,2442.8828 L535.1343,2452.8828 L231.8442,2452.8828 L231.8442,2435.75" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="90.5313" style="stroke:#000000;stroke-width:1.5;" width="318.29" x="231.8442" y="2435.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="268.29" x="246.8442" y="2448.8169">IF: EHR integrated directly with Dezi</text><g class="message" data-participant-1="EHR" data-participant-2="Knooppunt"><polygon fill="#181818" points="477.4155,2485.1484,487.4155,2489.1484,477.4155,2493.1484,481.4155,2489.1484" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="268.3945" x2="483.4155" y1="2489.1484" y2="2489.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.7583" x="275.3945" y="2468.9497">Create DeziIDTokenCredential</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65.3237" x="275.3945" y="2484.0825">(id_token)</text></g><g class="message" data-participant-1="Knooppunt" data-participant-2="EHR"><polygon fill="#181818" points="279.3945,2514.2813,269.3945,2518.2813,279.3945,2522.2813,275.3945,2518.2813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="273.3945" x2="493.4155" y1="2518.2813" y2="2518.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.1445" x="285.3945" y="2513.2153">DeziIDTokenCredential</text></g><g class="message" data-participant-1="EHR" data-participant-2="AuthClient"><polygon fill="#181818" points="708.4365,2565.5469,718.4365,2569.5469,708.4365,2573.5469,712.4365,2569.5469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="268.3945" x2="714.4365" y1="2569.5469" y2="2569.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.3389" x="275.3945" y="2549.3481">Request token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.2881" x="275.3945" y="2564.481">(DeziIDTokenCredential)</text></g><g class="message" data-participant-1="AuthClient" data-participant-2="EHR"><polygon fill="#181818" points="279.3945,2612.8125,269.3945,2616.8125,279.3945,2620.8125,275.3945,2616.8125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="273.3945" x2="724.4365" y1="2616.8125" y2="2616.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.812" x="285.3945" y="2596.6138">Token Response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.8975" x="285.3945" y="2611.7466">(access token)</text></g><path d="M735,2582.5469 L735,2622.5469 L897,2622.5469 L897,2592.5469 L887,2582.5469 L735,2582.5469" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M887,2582.5469 L887,2592.5469 L897,2592.5469 L887,2582.5469" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.4575" x="741" y="2599.6138">Token is requested at</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.1729" x="741" y="2614.7466">remote OAuth server</text><g class="message" data-participant-1="EHR" data-participant-2="RemoteXIS"><polygon fill="#181818" points="872.3262,2667.0781,882.3262,2671.0781,872.3262,2675.0781,876.3262,2671.0781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="268.3945" x2="878.3262" y1="2671.0781" y2="2671.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.8745" x="275.3945" y="2650.8794">Data request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.8975" x="275.3945" y="2666.0122">(access token)</text></g><g class="message" data-participant-1="RemoteXIS" data-participant-2="EHR"><polygon fill="#181818" points="279.3945,2711.3438,269.3945,2715.3438,279.3945,2719.3438,275.3945,2715.3438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="273.3945" x2="888.3262" y1="2715.3438" y2="2715.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.5039" x="285.3945" y="2695.145">Data response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.9102" x="285.3945" y="2710.2778">(e.g. FHIR)</text></g><g class="message" data-participant-1="EHR" data-participant-2="User"><polygon fill="#181818" points="49.9551,2740.4766,39.9551,2744.4766,49.9551,2748.4766,45.9551,2744.4766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="43.9551" x2="262.3945" y1="2744.4766" y2="2744.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.5039" x="55.9551" y="2739.4106">Data response</text></g><!--SRC=[xLTTJzmw47tFhnZn158BxojjfNRtShk2GhKjLH-GAfCCMOjWfuu3fR- -u_5cRMyIs0ktwaih8NMTcUCpNyUsbRP2cEDF2PKkfGAX2cWRD20BL5RQ1w35GbW1-2DV2LLYasLN-WVidUfSLF1ryMal0_edSgiDN90h_wo5iJANjL0MtXbzFxJ-p_jbR-r4QLtNhRAzBszRkvfLabY1Q63ltFq6lt2fzizQsy2PBl1WBqEAWIXciRSBCLbOugssIFGPpV_oqMJJQPIHImMWQti8RoUECAN3Occ4nGRk9J5Wo-aqSv73wpTiCu5Jvtgq85j3YSdeJzwH3uViBCXmdHKo_Y1kaCCZKjzRREohIsMma0R9jS34kJIwhVscvulvZDsqaJ-nW1b53yULliywQDg5BIUfhR1IgsulobsJwngdzATa0RNHrxB2Wy2PKySuhnFQQm0G1Ejw9MVSc31xRZ8JF3ax0opPqi71FXwMXp2NfPplm6GJ7N5gQgqQfAWO9tSTqQCKxUpBjLndEtKRgbgSpy_w1kCy3hdoVgwLDxJzZWd0XhCilbctjeygDm-rnUAWppvgWQksaGgR1anRqM2wVTOy_IuVZSxTvm7SRcX3X3tlERBng7TY_4LKid1GdJNabP2t2Qbrylv52mRlj6yOQAomRPFo6KlRSj1jEqCzShCLvZSZUx9XgCl9qTdvoJQgIuzJ5KvzzB_KznCfO1I_DZJ7kK47m9BQK2dSX7HUeO6vyKbkIXfZgRPdVaIGtas2MZeHMym_ld8Vm-8Vrgfep0AdbsbHE1u2uXOyC-memSNoz59Tqyd4iRi9ZJsJq6AVE9Imvr_n_N_5DoxR4n8yKlYNot6lCt-7A8yswyu2dTwBHl6UaknHnqVbUoZbpnBnjE2xIlaewSTaFPtofCg34XyIF2JqusXRea-tvKxcntJcFmnC8FM2AyjeXpysA3lssymVRwvKYpdZqWg_74GLZSx1G4bskGVHuJ88xV6Kkx8RMQwOITjOVGlN4YjtXe8lXrbZJaQ0XfETt1qkQZSNHmC7-Kv4dtFO7wFDLrAL_k75HtVw9kkTuTrnu1pel3EK2UEVD8rkJOxPm2F2JR38MNuu1iwf_xGutdhi5E2xhNe8DuduclNiddYwuQBhw501HyVOVGW3776D7f8XSKo9s3tIRfiz0W2lHtY1RA-buqmFjA-tbtHeU4AKSM7TrOgBw1-xLF6xzJCwYZXYG-5cNVE6zorbphMH2VEUKDa0RJoou1jbtsDiuk4xml7xnJ8Hh83HzVs5R_h4VQldVm40]--></g></svg>