services:
  vc-issuer:
    build: .
    ports:
      - "3000:3000"
    environment:
      DATABASE_URL: file:/app/data/vc-issuer.db
      NEXT_PUBLIC_BASE_URL: http://localhost:3000
      ISSUER_HOSTNAME: localhost:3000
      NODE_ENV: development
      # Uncomment to use Nuts node for credential issuance
      # NUTS_NODE_INTERNAL_URL: http://nuts-node:8081
      # NUTS_ISSUER_DID: did:web:example.com:iam:org-a
      # Disable TLS certificate validation (for development only)
      NODE_TLS_REJECT_UNAUTHORIZED: "0"
    volumes:
      - vc_issuer_data:/app/data
  nutsnode:
    image: nutsfoundation/nuts-node:master
    ports:
      - "8081:8081"
      - "8080:8080"
    environment:
      NUTS_CRYPTO_STORAGE: fs
      NUTS_HTTP_INTERNAL_ADDRESS: :8081
      NUTS_URL: http://localhost:8080
      NUTS_STRICTMODE: false
      NUTS_AUTH_CONTRACTVALIDATORS: dummy
      NUTS_AUTH_AUTHORIZATIONENDPOINT_ENABLED: true

volumes:
  vc_issuer_data:
